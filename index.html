<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>setTimeoutç¦æ­¢ãƒ»ç‹¬ç«‹3ç§’é…å»¶ãƒ»é€£æ‰“åŒæ™‚é–‹æ”¾</title>
<style>
body { font-family: sans-serif; text-align: center; margin-top: 40px; }
button {
  padding: 10px 20px;
  font-size: 18px;
  margin: 10px;
  cursor: pointer;
  border-radius: 8px;
  border: none;
  background-color: #0078d7;
  color: white;
  transition: 0.2s;
}
button:hover { background-color: #005fa3; }
#status {
  margin-top: 20px;
  font-size: 16px;
  color: #333;
}
</style>
</head>
<body>
<h2>setTimeoutç¦æ­¢ãƒ»3ç§’é…å»¶ãƒ»é€£æ‰“åŒæ™‚ã‚ªãƒ¼ãƒ—ãƒ³</h2>
<button id="openBtn">URLã‚’é–‹ã</button>
<div id="status"></div>
<script>
const urls = [
  "https://open2ch.net/ajax/add_history.cgi?bbs=livejupiter&key=1761988917",
  "https://open2ch.net/ajax/add_history.cgi?bbs=livejupiter&key=1701197940"
];

let clickCount = 0;

// setIntervalãƒ™ãƒ¼ã‚¹ã®é…å»¶é–¢æ•°ï¼ˆsetTimeoutã®ä»£æ›¿ï¼‰
function intervalWait(ms) {
  return new Promise(resolve => {
    const start = performance.now();
    const interval = setInterval(() => {
      if (performance.now() - start >= ms) {
        clearInterval(interval);
        resolve();
      }
    }, 10); // 10ãƒŸãƒªç§’ã”ã¨ã«ãƒã‚§ãƒƒã‚¯
  });
}

document.getElementById("openBtn").addEventListener("click", async function (e) {
  const statusDiv = document.getElementById("status");
  const currentClick = ++clickCount;
  const targetUrl = urls[(currentClick - 1) % urls.length];
  
  console.log(`ğŸ•’ [${currentClick}] 3ç§’å¾…æ©Ÿé–‹å§‹`);
  statusDiv.textContent = `[${currentClick}] å¾…æ©Ÿä¸­...`;
  
  // setIntervalã§3ç§’å¾…æ©Ÿ
  await intervalWait(3000);
  
  console.log(`ğŸš€ [${currentClick}] é–‹ã: ${targetUrl}`);
  const newWindow = window.open(targetUrl, "_blank");
  
  if (!newWindow) {
    console.error(`âŒ [${currentClick}] ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ`);
    statusDiv.textContent = "ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¨±å¯ã—ã¦ãã ã•ã„";
  } else {
    statusDiv.textContent = `[${currentClick}] é–‹ãã¾ã—ãŸ`;
  }
});
</script>
</body>
</html>
